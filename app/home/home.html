<center>

  <h1>ConSpeciFix</h1>
  <h1><small><i>bacteria identification for a new age</i></small></h1>
<hr width="70%" size="2">

</center>
<br>


<div class="row">
  <div class="col-sm-1"> &nbsp </div>
  <div class="col-sm-10"> 

    To use ConSpeciFix to assign bacteria to Biological Species:
    <ul>
    <li> <b> Prepare your data: </b> retrieve the FASTA file (.fa) containing the genome that you wish to assign. (an <a target="_blank" href="ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCA/001/541/385/GCA_001541385.1_ASM154138v1/GCA_001541385.1_ASM154138v1_cds_from_genomic.fna.gz">example</a> from NCBI.) Please make certain to <a target="_blank" href="http://www.wikihow.com/Unzip-a-File">unzip</a> your file before uploading it.</li>
    <li> <b> Upload your data: </b> drag and drop your file into the field below.</li>
    <li> <b> Tell us what you know: </b> select the species set you would like to test your genome against. If you do not know which candidate species to test against, you can search for the most likely species by selecting "Submit genome for Exploratory Phase". Once the most likely candidate species has been identified, you can submit your genome again to run a full recombination-based species classification. </li>
    <li> <b> Get Answers: </b> you will receive an email when the results are ready (usually in a matter of hours).</li>
    </ul>
    <br>
  </div>
  <div class="col-sm-1"> &nbsp </div>
</div>


<br>
<center>

    <div id="dropbox" class="dropbox" ng-class="dropClass"><span>{{dropText}}</span></div>
    <!-- <div ng-show="files.length"> -->
    <div ng-show="true">
        <div ng-repeat="file in files.slice(0)"> <br>
            <span>{{file.webkitRelativePath || file.name}}</span>
            (<span ng-switch="file.size > 1024*1024">
                <span ng-switch-when="true">{{file.size / 1024 / 1024 | number:2}} MB</span>
                <span ng-switch-default>{{file.size / 1024 | number:2}} kB</span>
            </span>)
        </div>
        <br>

        <div class="row">
          <div class="col-sm-4"> &nbsp </div>
          <div class="col-sm-4">
            <div class="form-group">
              <input type="text" ng-disabled="submitted&& timeStamp!='error'" class="form-control" id="usr" ng-model="email" placeholder="your@email.com" >
            </div>
          </div>
          <div class="col-sm-4">&nbsp </div>
        </div>
        <div class="row">
          <div class="col-sm-2"> &nbsp </div>
          <div class="col-sm-4" style="border-right:thin #777777 solid; height:80px;"  > 
            <b> Choose Species</b> <br>
           <div class="form-group">
            <select class="form-control" ng-disabled="(submitted && timeStamp!='error')||explore"  id="exampleSelect" ng-model="species">
              <option disabled> Choose Species </option>
              <option value="Gallibacterium_anatis" >Gallibacterium anatis</option>
              <option value="Lactobacillus_crispatus" >Lactobacillus crispatus</option>
              <option value="Porphyromonas_gingivalis" >Porphyromonas gingivalis</option>
              <option value="Mycobacterium_colombiense" >Mycobacterium colombiense</option>
            </select>
          </div>  
          </div>
           <div class="col-sm-4"> 
            <b> Exploratory Phase</b> <br>
              <div class="checkbox">
                <label><input type="checkbox"  ng-disabled="submitted && timeStamp!='error'" ng-model="explore" value="">Submit genome for Exploratory Phase</label>
              </div>
          </div>
          <div class="col-sm-2"> &nbsp </div>
        </div>
        <br>
        <div class="row">
          <div class="col-sm-3"> &nbsp </div>
          <div class="col-sm-6"> 
            <input type="button" ng-disabled="submitted&& timeStamp!='error'" class="btn btn-default" ng-click="uploadFile()" value="Upload and Begin" />
          </div>
          <div class="col-sm-3"> &nbsp </div>
        </div>
          
   
    </div>
    <br>
    <div ng-show="progress>-1 && progress<100"> progress: {{progress}}%</div>
     </center>  
    <br>
    <div ng-show="timeStamp==='error'">
      <center>
      <br>
      <b>Uh-o! We've got a problem:</b>
       </center>  
      <br>
      <div class="row">
        <div class="col-sm-1"> &nbsp </div>
        <div class="col-sm-10"> 
          It seems we've encountered an issue with the file you gave us. No worries, this probably just means the file didn't upload properly. Give it another go and if it keeps up, give us a holler at conspecifix@gmail.com and we'll see what we can do.
        </div>
        <div class="col-sm-1"> &nbsp </div>
      </div>

    </div>
    <div ng-show="timeStamp>0 && !explore">
      <center>
      <hr width="70%" size="2">

      <h2>{{species}}</h2>
      <br>

      <object data="efs/results/{{species}}/standardGraph.pdf" type="application/pdf" width="600px" height="600px"> 
        <p>It appears you don't have a PDF plugin for this browser.
         No biggie.</p>  
      </object>
      </center>
      <br><br>
      <p>
        This is the default h/m graph for the species you have chosen to test against. We will send you the graph resulting from an analysis that includes your genome, as well as this one, as soon as it finishes to {{emailAtSubmit}} . To see some more about our process, look <a href="#!/process">here</a>.
      </p>
    </div>
     <div ng-show="timeStamp>0 && explore">
      <center>
      <hr width="70%" size="2">

      <h2>Submitted</h2>
      <br>
      <br>
      </center>
      <p>
        We will email {{emailAtSubmit}} with the results of the exploration. To see some more about our process, please refer to <a href="#!/process">our process</a>.
      </p>
    </div>

</center>